---
applyTo: '**/palettes.yml'
---

# Code Review Instructions for palettes.yml

This file provides instructions for GitHub Copilot code review when reviewing changes to the `palettes.yml` file.

## Generated Files Synchronization

When changes are made to `palettes.yml`, ensure that the following generated files are synchronized with the updates:

- `./tableau/Preferences.tps` (Tableau color preferences)
- `./r_script/ir_color_palettes.R` (R color palette definitions)

### Verification Requirements

Both generated files must match exactly with the files created by running the build command:

```bash
poetry run build
```

The build command:

1. Reads `palettes.yml`
2. Generates `tableau/Preferences.tps` (Tableau color preferences)
3. Generates `r_script/ir_color_palettes.R` (R color palette definitions)
4. Runs Prettier on the generated files

### Code Review Checks

When reviewing changes to `palettes.yml`, verify that:

1. **Both generated files are included** in the pull request if `palettes.yml` has been modified
2. **Generated files match the build output**: The content of `tableau/Preferences.tps` and `r_script/ir_color_palettes.R` must be identical to what would be generated by running `poetry run build`
3. **No manual edits to generated files**: The generated files should only be updated by the build script, never manually edited

### Flagging Issues

Flag the following issues:

- `palettes.yml` has been modified but one or both generated files are missing from the PR
- Generated files show signs of manual editing (inconsistent with build script output)
- Generated files are not synchronized with the changes in `palettes.yml`

## YAML Structure

Verify that `palettes.yml` follows the correct structure:

```yaml
organization:
  name: 'Division of Institutional Research, Office of Academic Affairs, AIU'
  name_ja: '国際教養大学教務課教学IRチーム'
  email: 'ir.div@aiu.ac.jp'
palettes:
  - name: 'Palette Name'
    type: 'categorical' # categorical, sequential, or diverging
    description: 'Description of the palette'
    colors:
      - key: 'Label'
        value: '#hexcolor'
```

Ensure:

- All required fields are present
- Color values are valid hex colors (e.g., `#24693d`)
- Palette types are one of: `categorical`, `sequential`, or `diverging`
