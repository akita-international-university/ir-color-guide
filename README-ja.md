<!-- markdownlint-disable MD013 -->

# IRデータ可視化配色ガイドライン

[Click here for the English version](./README.md)

> [!IMPORTANT]
> 本リポジトリは現在作成中です。ここに記載されている内容は最終版ではなく、国際教養大学における公式な方針や考えを示すものではありません。教学IRチームから明示的な許可を得ることなく、本リポジトリの内容を引用または配布することを禁止します。

## 目的

本ガイドラインは、国際教養大学（AIU）教務課教学IRチームが使用するパレット（データ可視化に使用される配色セット）に関する明確な方針を定義することで、教学IRチームの成果物における一貫性、視認性、およびアクセシビリティを担保することを目的としています。

## 適用範囲

本ガイドラインの適用範囲は、教学IRチームが作成するすべての可視化データです。これにはBIツール等で作成・更新されるダッシュボードやレポート、グラフ、プレゼンテーション資料などが含まれます。

## 方針

パレットは、AIUのウェブアクセシビリティ方針（[ウェブアクセシビリティ方針 | 公立大学法人 国際教養大学 | Akita International University](https://web.aiu.ac.jp/web-accessibility-policy/)）に準拠して設定することとします。さらに、AIUのウェブアクセシビリティ方針が、Web Content Accessibility Guidelines（WCAG）の最新版に沿って定められていることを前提に、同方針で明示されていない内容はWCAGを参照することとします。

教学IRチームが作成する資料が、受け手の色覚特性に関わらず理解できるものであることを担保するために、パレットは可能な限り、Rの[`RColorBrewer`パッケージ](https://cran.r-project.org/web/packages/RColorBrewer/index.html)の色覚多様性対応パレットから選択することとします。

> [!NOTE]
> 教学IRチームが作成するすべての可視化資料を色覚多様性に対応したものにすることを目指しているものの、現時点で利用可能なリソースの制約により、既存の可視化資料の大部分を色覚多様性に完全に対応していないパレットから移行することが現実的であると判断しました。今後も可視化資料のアクセシビリティ向上に向けて継続的に取り組んでいきます。特に、色覚多様性対応の確保を自動化するご提案やフィードバックを歓迎いたします。

## 技術的な留意事項

> [!NOTE]
> 本セクションを実行するには、[R（統計及び可視化のための無料のオープンソースソフトウェア環境）](https://www.r-project.org/)のインストールが前提条件となります。

RColorBrewerの色覚多様性対応パレットは、Rコンソールで以下の簡単なコマンドを実行することで取得できます：

```r
# 未インストールの場合は、RColorBrewerパッケージをインストールしてください:
# install.packages("RColorBrewer")
# または
# renv::install("RColorBrewer")
library(RColorBrewer)
RColorBrewer::display.brewer.all(colorblindFriendly = TRUE)
```

> [!TIP]
> [`tidyverse`パッケージ](https://tidyverse.org/)を使用している場合は、`RColorBrewer`を明示的に読み込む必要はありません。`library(tidyverse)`でtidyverseを読み込むだけで、そのセッション内で`RColorBrewer`が利用可能になります。

## 基本カラーパレットの定義

多くの可視化で使用される基本的なカラーパレットは、本リポジトリのルートにある設定ファイル`./palettes.yml`に事前定義されています。

このYAMLファイルに基づき、本リポジトリ内のPythonスクリプト`./scripts/build.py`が、Tableau設定ファイル`./tableau/Preferences.tps`およびRスクリプト`./r_script/ir_color_palettes.R`を生成します。これらのファイルは、それぞれのツールで可視化の配色に使用できます。

単一の設定YAMLファイルと、各ツール用に自動生成されるファイルをセットで管理することにより、教学IRチームが使用する複数のツール間での一貫性を担保します。事前定義されたパレットへのすべての変更は、個別のファイルではなくYAMLファイルに対して行うこととします。

### パレットの使用方法

> [!IMPORTANT]
> 本セクションは現在空白です。TableauおよびRで生成されるパレットを使用する方法については、今後のアップデートで追加される予定です。
